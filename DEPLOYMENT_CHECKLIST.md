# 部署前检查清单

在部署到生产环境之前，请确认以下所有项目：

## 代码准备

- [ ] 所有功能已完成并测试通过
- [ ] 运行 `npm run test` 确保所有测试通过
- [ ] 运行 `npm run lint` 确保代码质量
- [ ] 运行 `npm run build` 确保构建成功
- [ ] 检查控制台无错误和警告

## 环境配置

- [ ] 已获取有效的 DeepSeek API 密钥
- [ ] 已在 Netlify 设置 `DEEPSEEK_API_KEY` 环境变量
- [ ] 已在 Netlify 设置 `NEXT_PUBLIC_APP_URL` 环境变量
- [ ] 确认 `.env.local` 未提交到 Git 仓库
- [ ] 确认 `.gitignore` 包含 `.env*` 规则

## 安全检查

- [ ] API 密钥不在客户端代码中
- [ ] 所有 API 调用通过 `/api` 路由
- [ ] HTTP 安全头已配置（`next.config.ts` 和 `netlify.toml`）
- [ ] CSP 策略已设置
- [ ] 敏感信息已从代码中移除

## 性能优化

- [ ] 图片已优化（使用 Next.js Image 组件）
- [ ] 启用了代码压缩（`swcMinify: true`）
- [ ] 启用了 Gzip 压缩（`compress: true`）
- [ ] 静态资源缓存已配置
- [ ] 骨架屏加载状态已实现

## 功能测试

- [ ] 首页正常显示（校徽、校训、导航）
- [ ] 评估表单可以提交
- [ ] API 调用返回正确结果
- [ ] 结果卡片正确显示（等级、分析、润色）
- [ ] 雷达图正确渲染
- [ ] 历史记录保存和读取正常
- [ ] 练习题加载和预填充正常
- [ ] 移动端响应式布局正常

## 可访问性

- [ ] 所有交互元素有适当的 ARIA 标签
- [ ] 键盘导航正常工作
- [ ] 颜色对比度符合 WCAG AA 标准
- [ ] 移动端触摸目标尺寸 ≥ 44x44px

## 文档

- [ ] README.md 已更新
- [ ] DEPLOYMENT.md 已创建
- [ ] API 文档已完善
- [ ] 环境变量说明清晰

## Git 仓库

- [ ] 所有更改已提交
- [ ] 提交信息清晰明确
- [ ] 已推送到远程仓库
- [ ] 分支策略明确（main 分支用于生产）

## Netlify 配置

- [ ] `netlify.toml` 已创建并配置正确
- [ ] 构建命令设置为 `npm run build`
- [ ] 发布目录设置为 `.next`
- [ ] Node 版本设置为 20
- [ ] 重定向规则已配置
- [ ] 安全头已配置

## 部署后验证

部署完成后，请验证：

- [ ] 网站可以正常访问
- [ ] 所有页面路由正常
- [ ] API 功能正常工作
- [ ] 历史记录功能正常
- [ ] 移动端显示正常
- [ ] 控制台无错误
- [ ] 网络请求正常（检查开发者工具）

## 监控设置

- [ ] 配置错误监控（可选）
- [ ] 配置性能监控（可选）
- [ ] 配置使用分析（可选）
- [ ] 设置 API 使用限额警告

## 回滚计划

- [ ] 了解如何在 Netlify 回滚部署
- [ ] 保留上一个稳定版本的部署记录
- [ ] 准备紧急联系方式

---

**完成日期**: ___________

**部署人员**: ___________

**审核人员**: ___________
