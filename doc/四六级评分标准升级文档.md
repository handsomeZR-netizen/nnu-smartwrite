# 四六级评分标准升级文档

## 📋 修改概述

本次升级将评分系统从通用/考研标准切换到**四六级（CET-4/6）阅卷标准**，更贴合本科生英语学习需求。

## 🎯 核心改动

### 1. AI 角色定位调整

**修改前：** 南京师范大学英语写作与翻译评审专家（通用标准）

**修改后：** 四六级阅卷组长（CET Grader）

- 严格按照《全国大学英语四六级考试大纲》评分
- 采用总体印象评分法（Global Scoring）
- 重点关注语言规范性、连贯性和得体性

### 2. 评分标准映射

#### 四六级 15 分制

| 等级 | 分数范围 | 描述 |
|------|---------|------|
| **S** | 13-15分 | Excellent - 切题，表达清楚，连贯性好，基本无语法错误，句型丰富 |
| **A** | 10-12分 | Good - 切题，表达较清楚，较连贯，有少量语言错误 |
| **B** | 7-9分 | Average - 基本切题，表达不够清晰，勉强连贯，语言错误较多 |
| **C** | <7分 | Poor - 条理不清，思路紊乱，语言支离破碎，严重错误多 |

### 3. 评估维度调整

#### 写作题雷达图（4个维度）

**修改前：**
- 词汇 (Vocabulary)
- 逻辑 (Logic)
- 结构 (Structure)
- 内容 (Content)

**修改后：**
- **切题 (Relevance)** - 内容完整性与切题度
- **丰富 (Variety)** - 词汇高级度与句式多样性
- **连贯 (Coherence)** - 逻辑衔接与过渡词
- **规范 (Accuracy)** - 语法准确与拼写规范

#### 翻译题雷达图（4个维度）

**修改前：**
- 信 (Faithfulness)
- 达 (Expressiveness)
- 雅 (Elegance)
- 语法 (Grammar)

**修改后：**
- **准确 (Accuracy)** - 准确还原原文含义
- **通顺 (Fluency)** - 表达流畅自然
- **词汇 (Vocabulary)** - 词汇选择恰当
- **句法 (Syntax)** - 句式结构正确

### 4. 评估重点转变

#### 写作题关注点

**修改前（考研标准）：**
- 思想深刻性
- 论证充分性
- 批判性思维

**修改后（四六级标准）：**
- ✅ **词汇升级** - 识别"低幼词汇"（think, good, bad）→ 建议高级词汇（maintain, positive, detrimental）
- ✅ **句式多样** - 检查简单句（SVO）→ 建议从句、非谓语结构
- ✅ **中式英语** - 严格指出不地道表达（do exercise → take exercise）
- ✅ **基础语法** - 零容忍：主谓一致、时态、冠词、单复数

#### 润色方向

**修改前：**
- 增加论据
- 深化观点
- 加强逻辑链条

**修改后：**
- 合并简单句为复杂句
- 使用高级连接词（Moreover, Consequently, In brief）
- 展示满分范文级别的表达

## 📁 修改文件清单

### 1. `lib/ai-prompt.ts`

**主要修改：**

```typescript
// 新增四六级角色定义
const CET_ROLE = `You are a senior grader for the College English Test (CET-4/6)...`

// 新增四六级单句评估 Prompt
const CET_SENTENCE_PROMPT = `...`

// 新增四六级全文评估 Prompt
const CET_ARTICLE_PROMPT = `...`

// 修改系统提示词构建函数
export function buildSystemPrompt(
  mode: EvaluationMode = 'sentence',
  evaluationType?: EvaluationType
): string {
  // 写作题统一使用四六级标准
  if (evaluationType === 'writing') {
    const modePrompt = mode === 'article' ? CET_ARTICLE_PROMPT : CET_SENTENCE_PROMPT;
    const radarHint = `四六级标准雷达图维度...`;
    return CET_ROLE + modePrompt + radarHint + OUTPUT_FORMAT;
  }
  // 翻译题也使用四六级标准
  ...
}
```

### 2. `app/api/evaluate/route.ts`

**主要修改：**

```typescript
// 修改雷达图标签生成函数
function getDefaultRadarLabels(evaluationType?: EvaluationType): [string, string, string, string] {
  if (evaluationType === 'translation') {
    return ['准确 (Accuracy)', '通顺 (Fluency)', '词汇 (Vocabulary)', '句法 (Syntax)'];
  }
  return ['切题 (Relevance)', '丰富 (Variety)', '连贯 (Coherence)', '规范 (Accuracy)'];
}

// 更新测试模式的模拟响应
function generateMockResponse(evaluationType: EvaluationType) {
  // 返回符合四六级标准的模拟数据
  ...
}
```

## 🧪 测试验证

### 测试文件：`test-cet-evaluation.js`

包含 4 个测试用例：

1. **写作题 - 简单句（词汇低幼）**
   - 输入：`I think learning English is very good...`
   - 验证：AI 是否指出 "think" 和 "good" 等低幼词汇
   - 结果：✅ 通过

2. **写作题 - 中式英语**
   - 输入：`We should do exercise to protect environment...`
   - 验证：AI 是否指出 "do exercise" 等中式表达
   - 结果：✅ 通过

3. **翻译题 - 四六级标准**
   - 输入：`With the development of technology, people's life becomes...`
   - 验证：雷达图是否使用"准确/通顺/词汇/句法"
   - 结果：✅ 通过

4. **全文写作 - 四六级议论文**
   - 输入：120 字议论文（词汇简单、句式单一）
   - 验证：AI 是否提供满分范文级别的润色
   - 结果：✅ 通过

### 运行测试

```bash
cd nnu-smartwrite
node test-cet-evaluation.js
```

## ✅ 验证标准

每个测试用例自动验证以下内容：

1. ✅ **雷达图标签正确性**
   - 写作题：切题/丰富/连贯/规范
   - 翻译题：准确/通顺/词汇/句法

2. ✅ **词汇升级建议**（写作题）
   - 必须指出低幼词汇（think, good, bad）
   - 必须建议高级替换词

3. ✅ **句式多样性建议**（写作题）
   - 必须指出简单句问题
   - 必须建议使用从句

4. ✅ **语言正确性**
   - `polished_version` 必须是英文
   - `analysis` 必须是中文

## 📊 测试结果示例

### 测试 1：简单句评估

```
评分: B (7-9分 - Average)
语义正确: ✓

总体分析:
该句子基本切题但表达过于简单，词汇重复且句式单一，属于典型的初中英语水平。
虽然语义正确，但缺乏四六级考试要求的语言丰富性和表达深度。

优点:
1. 句子结构完整，主谓宾清晰
2. 内容切合题目要求

不足:
1. 词汇重复且低幼，连续使用'think'和'good'等基础词汇
2. 句式过于简单，三个句子都是SVO结构，没有使用任何从句

润色建议:
It is widely acknowledged that acquiring proficiency in English is of paramount 
importance, as it significantly enhances one's employability in today's globalized 
job market, a perspective shared by the majority of professionals.

雷达图维度:
- 切题度: 75/100
- 丰富度: 45/100  ← 明显指出词汇和句式问题
- 连贯性: 60/100
- 规范性: 80/100
```

## 🎯 预期效果

### 对学生的价值

1. **精准提分指导**
   - 明确指出哪些词太简单（think → maintain）
   - 具体展示如何改写句子（简单句 → 从句）

2. **避免失分陷阱**
   - 严格指出中式英语
   - 零容忍基础语法错误

3. **满分范文参考**
   - `polished_version` 提供 CET-6 级别的重写
   - 直接展示高级表达方式

### 对产品的价值

1. **精准定位**
   - 直击本科生（尤其是非英专学生）的痛点
   - 符合四六级备考需求

2. **差异化竞争**
   - 市面上少有专门针对四六级的 AI 评估工具
   - 评分标准专业、权威

3. **用户粘性**
   - 学生会反复使用来练习提分
   - 评估结果可直接用于备考

## 🔄 后续优化建议

1. **题型细分**
   - 图画作文
   - 书信/应用文
   - 议论文

2. **分数换算**
   - 将 S/A/B/C 映射到具体分数（13-15/10-12/7-9/<7）
   - 显示在前端界面

3. **高频词库**
   - 内置四六级高频词汇表
   - 自动检测学生是否使用

4. **真题练习**
   - 集成历年四六级真题
   - 提供官方范文对比

## 📝 总结

本次升级成功将评分系统从通用标准切换到四六级专业标准，核心改动包括：

- ✅ AI 角色：四六级阅卷组长
- ✅ 评分标准：15 分制（S/A/B/C）
- ✅ 评估维度：切题/丰富/连贯/规范
- ✅ 关注重点：词汇升级 + 句式多样 + 中式英语 + 基础语法
- ✅ 润色方向：满分范文级别的重写

所有测试用例通过，系统已准备好为四六级考生提供专业的评估服务！

---

**修改日期：** 2025-11-27  
**修改人员：** Kiro AI Assistant  
**测试状态：** ✅ 全部通过
